(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3406:function(e,t,o){Promise.resolve().then(o.bind(o,1331))},1331:function(e,t,o){"use strict";o.d(t,{default:function(){return i}});var n=o(7437),r=o(2265),l=o(3859),s=o(9386);let a=async(e,t)=>{let o=Object.assign(t,{}),n=new s.ZP({apiKey:localStorage.getItem("OPENAI_API_KEY"),dangerouslyAllowBrowser:!0});console.log({input:t});let r=Object.entries(o).filter(e=>(console.log(e),!e[1].code.startsWith("/@"))).map(e=>{let[t,o]=e;return console.log(t,o),"".concat(t,":\n```").concat(o.code,"```")}).join("\n"),l=(await n.chat.completions.create({model:"gpt-4o-mini",messages:[{role:"system",content:"Perform the task the user requests. answer only in multiple operations, only perform the create_file operation."},{role:"user",content:e+"\n"+r}],temperature:1,max_tokens:16383,top_p:1,frequency_penalty:0,presence_penalty:0,parallel_tool_calls:!0,tools:[{type:"function",function:{name:"create_file",description:"affect changes by calling create_file.",parameters:{type:"object",required:["file_name","contents"],properties:{file_name:{type:"string",description:"Name of the file involved in the operation"},contents:{type:"string",description:"Content to replace in the file when replacing file contents"}},additionalProperties:!1},strict:!0}}],response_format:{type:"text"}})).choices[0].message.tool_calls;console.log("yo",l);let a=async e=>{for(let t of e){let{function:e}=t,{file_name:n,contents:r}=JSON.parse(e.arguments);o[n]=r,console.log("Created file: ".concat(n)),console.log(r)}};return await a(l),o};var i=e=>{let{initialFiles:t}=e,[o,s]=(0,r.useState)(t);return(0,n.jsx)(l.oT,{files:o,options:{bundlerURL:"https://sandpack-bundler.codesandbox.io"},theme:"light",template:"nextjs",children:(0,n.jsxs)(l.sp,{children:[(0,n.jsx)(()=>{let[e,t]=(0,r.useState)(!1),[o,i]=(0,r.useState)(""),[c,p]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=localStorage.getItem("OPENAI_API_KEY");e&&p(e)},[]);let{sandpack:d}=(0,l.X3)(),{files:u}=d,f=async e=>{e.preventDefault(),s(await a(o,u)),i(""),t(!1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>{t(!e)},style:{position:"fixed",bottom:"20px",right:"20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"50%",width:"50px",height:"50px",fontSize:"24px",cursor:"pointer"},children:"+"}),e&&(0,n.jsxs)("form",{onSubmit:f,style:{position:"fixed",bottom:"80px",right:"20px",display:"flex",alignItems:"center",backgroundColor:"#fff",border:"1px solid #ccc",borderRadius:"5px",padding:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[(0,n.jsx)("input",{type:"text",value:o,onChange:e=>i(e.target.value),placeholder:"Type your prompt...",style:{border:"none",outline:"none",flex:1,padding:"5px",borderRadius:"5px",marginRight:"5px"}}),(0,n.jsx)("input",{type:"password",value:c,onChange:e=>{let t=e.target.value;p(t),localStorage.setItem("OPENAI_API_KEY",t)},placeholder:"OPENAI_API_KEY",style:{border:"none",outline:"none",flex:1,padding:"5px",borderRadius:"5px",marginRight:"5px"}}),(0,n.jsx)("button",{type:"submit",style:{backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"5px",padding:"5px 10px",cursor:"pointer"},children:"Submit"})]})]})},{}),(0,n.jsx)(l.Lj,{}),(0,n.jsx)(l._V,{closableTabs:!0,showTabs:!0}),(0,n.jsx)(l.Gj,{})]})})}}},function(e){e.O(0,[344,401,918,971,117,744],function(){return e(e.s=3406)}),_N_E=e.O()}]);